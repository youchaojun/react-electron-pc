{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport * as React from 'react';\nimport classnames from 'classnames';\nimport getScrollBarSize from \"rc-util/es/getScrollBarSize\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport omit from \"rc-util/es/omit\";\nimport { addEventListener, dataToArray, getTouchParentScroll, isNumeric, removeEventListener, transformArguments, transitionEnd, transitionStr, windowIsUndefined } from './utils';\nvar currentDrawer = {};\n\nvar DrawerChild = /*#__PURE__*/function (_React$Component) {\n  _inherits(DrawerChild, _React$Component);\n\n  var _super = _createSuper(DrawerChild);\n\n  function DrawerChild(props) {\n    var _this;\n\n    _classCallCheck(this, DrawerChild);\n\n    _this = _super.call(this, props);\n\n    _this.domFocus = function () {\n      if (_this.dom) {\n        _this.dom.focus();\n      }\n    };\n\n    _this.removeStartHandler = function (e) {\n      if (e.touches.length > 1) {\n        return;\n      }\n\n      _this.startPos = {\n        x: e.touches[0].clientX,\n        y: e.touches[0].clientY\n      };\n    };\n\n    _this.removeMoveHandler = function (e) {\n      if (e.changedTouches.length > 1) {\n        return;\n      }\n\n      var currentTarget = e.currentTarget;\n      var differX = e.changedTouches[0].clientX - _this.startPos.x;\n      var differY = e.changedTouches[0].clientY - _this.startPos.y;\n\n      if ((currentTarget === _this.maskDom || currentTarget === _this.handlerDom || currentTarget === _this.contentDom && getTouchParentScroll(currentTarget, e.target, differX, differY)) && e.cancelable) {\n        e.preventDefault();\n      }\n    };\n\n    _this.transitionEnd = function (e) {\n      var dom = e.target;\n      removeEventListener(dom, transitionEnd, _this.transitionEnd);\n      dom.style.transition = '';\n    };\n\n    _this.onKeyDown = function (e) {\n      if (e.keyCode === KeyCode.ESC) {\n        var onClose = _this.props.onClose;\n        e.stopPropagation();\n\n        if (onClose) {\n          onClose(e);\n        }\n      }\n    };\n\n    _this.onWrapperTransitionEnd = function (e) {\n      var _this$props = _this.props,\n          open = _this$props.open,\n          afterVisibleChange = _this$props.afterVisibleChange;\n\n      if (e.target === _this.contentWrapper && e.propertyName.match(/transform$/)) {\n        _this.dom.style.transition = '';\n\n        if (!open && _this.getCurrentDrawerSome()) {\n          document.body.style.overflowX = '';\n\n          if (_this.maskDom) {\n            _this.maskDom.style.left = '';\n            _this.maskDom.style.width = '';\n          }\n        }\n\n        if (afterVisibleChange) {\n          afterVisibleChange(!!open);\n        }\n      }\n    };\n\n    _this.openLevelTransition = function () {\n      var _this$props2 = _this.props,\n          open = _this$props2.open,\n          width = _this$props2.width,\n          height = _this$props2.height;\n\n      var _this$getHorizontalBo = _this.getHorizontalBoolAndPlacementName(),\n          isHorizontal = _this$getHorizontalBo.isHorizontal,\n          placementName = _this$getHorizontalBo.placementName;\n\n      var contentValue = _this.contentDom ? _this.contentDom.getBoundingClientRect()[isHorizontal ? 'width' : 'height'] : 0;\n      var value = (isHorizontal ? width : height) || contentValue;\n\n      _this.setLevelAndScrolling(open, placementName, value);\n    };\n\n    _this.setLevelTransform = function (open, placementName, value, right) {\n      var _this$props3 = _this.props,\n          placement = _this$props3.placement,\n          levelMove = _this$props3.levelMove,\n          duration = _this$props3.duration,\n          ease = _this$props3.ease,\n          showMask = _this$props3.showMask; // router 切换时可能会导至页面失去滚动条，所以需要时时获取。\n\n      _this.levelDom.forEach(function (dom) {\n        dom.style.transition = \"transform \".concat(duration, \" \").concat(ease);\n        addEventListener(dom, transitionEnd, _this.transitionEnd);\n        var levelValue = open ? value : 0;\n\n        if (levelMove) {\n          var $levelMove = transformArguments(levelMove, {\n            target: dom,\n            open: open\n          });\n          levelValue = open ? $levelMove[0] : $levelMove[1] || 0;\n        }\n\n        var $value = typeof levelValue === 'number' ? \"\".concat(levelValue, \"px\") : levelValue;\n        var placementPos = placement === 'left' || placement === 'top' ? $value : \"-\".concat($value);\n        placementPos = showMask && placement === 'right' && right ? \"calc(\".concat(placementPos, \" + \").concat(right, \"px)\") : placementPos;\n        dom.style.transform = levelValue ? \"\".concat(placementName, \"(\").concat(placementPos, \")\") : '';\n      });\n    };\n\n    _this.setLevelAndScrolling = function (open, placementName, value) {\n      var onChange = _this.props.onChange;\n\n      if (!windowIsUndefined) {\n        var right = document.body.scrollHeight > (window.innerHeight || document.documentElement.clientHeight) && window.innerWidth > document.body.offsetWidth ? getScrollBarSize(true) : 0;\n\n        _this.setLevelTransform(open, placementName, value, right);\n\n        _this.toggleScrollingToDrawerAndBody(right);\n      }\n\n      if (onChange) {\n        onChange(open);\n      }\n    };\n\n    _this.toggleScrollingToDrawerAndBody = function (right) {\n      var _this$props4 = _this.props,\n          getContainer = _this$props4.getContainer,\n          showMask = _this$props4.showMask,\n          open = _this$props4.open;\n      var container = getContainer && getContainer(); // 处理 body 滚动\n\n      if (container && container.parentNode === document.body && showMask) {\n        var eventArray = ['touchstart'];\n        var domArray = [document.body, _this.maskDom, _this.handlerDom, _this.contentDom];\n\n        if (open && document.body.style.overflow !== 'hidden') {\n          if (right) {\n            _this.addScrollingEffect(right);\n          }\n\n          document.body.style.touchAction = 'none'; // 手机禁滚\n\n          domArray.forEach(function (item, i) {\n            if (!item) {\n              return;\n            }\n\n            addEventListener(item, eventArray[i] || 'touchmove', i ? _this.removeMoveHandler : _this.removeStartHandler, _this.passive);\n          });\n        } else if (_this.getCurrentDrawerSome()) {\n          document.body.style.touchAction = '';\n\n          if (right) {\n            _this.remScrollingEffect(right);\n          } // 恢复事件\n\n\n          domArray.forEach(function (item, i) {\n            if (!item) {\n              return;\n            }\n\n            removeEventListener(item, eventArray[i] || 'touchmove', i ? _this.removeMoveHandler : _this.removeStartHandler, _this.passive);\n          });\n        }\n      }\n    };\n\n    _this.addScrollingEffect = function (right) {\n      var _this$props5 = _this.props,\n          placement = _this$props5.placement,\n          duration = _this$props5.duration,\n          ease = _this$props5.ease;\n      var widthTransition = \"width \".concat(duration, \" \").concat(ease);\n      var transformTransition = \"transform \".concat(duration, \" \").concat(ease);\n      _this.dom.style.transition = 'none';\n\n      switch (placement) {\n        case 'right':\n          _this.dom.style.transform = \"translateX(-\".concat(right, \"px)\");\n          break;\n\n        case 'top':\n        case 'bottom':\n          _this.dom.style.width = \"calc(100% - \".concat(right, \"px)\");\n          _this.dom.style.transform = 'translateZ(0)';\n          break;\n\n        default:\n          break;\n      }\n\n      clearTimeout(_this.timeout);\n      _this.timeout = setTimeout(function () {\n        if (_this.dom) {\n          _this.dom.style.transition = \"\".concat(transformTransition, \",\").concat(widthTransition);\n          _this.dom.style.width = '';\n          _this.dom.style.transform = '';\n        }\n      });\n    };\n\n    _this.remScrollingEffect = function (right) {\n      var _this$props6 = _this.props,\n          placement = _this$props6.placement,\n          duration = _this$props6.duration,\n          ease = _this$props6.ease;\n\n      if (transitionStr) {\n        document.body.style.overflowX = 'hidden';\n      }\n\n      _this.dom.style.transition = 'none';\n      var heightTransition;\n      var widthTransition = \"width \".concat(duration, \" \").concat(ease);\n      var transformTransition = \"transform \".concat(duration, \" \").concat(ease);\n\n      switch (placement) {\n        case 'left':\n          {\n            _this.dom.style.width = '100%';\n            widthTransition = \"width 0s \".concat(ease, \" \").concat(duration);\n            break;\n          }\n\n        case 'right':\n          {\n            _this.dom.style.transform = \"translateX(\".concat(right, \"px)\");\n            _this.dom.style.width = '100%';\n            widthTransition = \"width 0s \".concat(ease, \" \").concat(duration);\n\n            if (_this.maskDom) {\n              _this.maskDom.style.left = \"-\".concat(right, \"px\");\n              _this.maskDom.style.width = \"calc(100% + \".concat(right, \"px)\");\n            }\n\n            break;\n          }\n\n        case 'top':\n        case 'bottom':\n          {\n            _this.dom.style.width = \"calc(100% + \".concat(right, \"px)\");\n            _this.dom.style.height = '100%';\n            _this.dom.style.transform = 'translateZ(0)';\n            heightTransition = \"height 0s \".concat(ease, \" \").concat(duration);\n            break;\n          }\n\n        default:\n          break;\n      }\n\n      clearTimeout(_this.timeout);\n      _this.timeout = setTimeout(function () {\n        if (_this.dom) {\n          _this.dom.style.transition = \"\".concat(transformTransition, \",\").concat(heightTransition ? \"\".concat(heightTransition, \",\") : '').concat(widthTransition);\n          _this.dom.style.transform = '';\n          _this.dom.style.width = '';\n          _this.dom.style.height = '';\n        }\n      });\n    };\n\n    _this.getCurrentDrawerSome = function () {\n      return !Object.keys(currentDrawer).some(function (key) {\n        return currentDrawer[key];\n      });\n    };\n\n    _this.getLevelDom = function (_ref) {\n      var level = _ref.level,\n          getContainer = _ref.getContainer;\n\n      if (windowIsUndefined) {\n        return;\n      }\n\n      var container = getContainer && getContainer();\n      var parent = container ? container.parentNode : null;\n      _this.levelDom = [];\n\n      if (level === 'all') {\n        var children = parent ? Array.prototype.slice.call(parent.children) : [];\n        children.forEach(function (child) {\n          if (child.nodeName !== 'SCRIPT' && child.nodeName !== 'STYLE' && child.nodeName !== 'LINK' && child !== container) {\n            _this.levelDom.push(child);\n          }\n        });\n      } else if (level) {\n        dataToArray(level).forEach(function (key) {\n          document.querySelectorAll(key).forEach(function (item) {\n            _this.levelDom.push(item);\n          });\n        });\n      }\n    };\n\n    _this.getHorizontalBoolAndPlacementName = function () {\n      var placement = _this.props.placement;\n      var isHorizontal = placement === 'left' || placement === 'right';\n      var placementName = \"translate\".concat(isHorizontal ? 'X' : 'Y');\n      return {\n        isHorizontal: isHorizontal,\n        placementName: placementName\n      };\n    };\n\n    _this.state = {\n      _self: _assertThisInitialized(_this)\n    };\n    return _this;\n  }\n\n  _createClass(DrawerChild, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (!windowIsUndefined) {\n        var passiveSupported = false;\n\n        try {\n          window.addEventListener('test', null, Object.defineProperty({}, 'passive', {\n            get: function get() {\n              passiveSupported = true;\n              return null;\n            }\n          }));\n        } catch (err) {}\n\n        this.passive = passiveSupported ? {\n          passive: false\n        } : false;\n      }\n\n      var _this$props7 = this.props,\n          open = _this$props7.open,\n          getContainer = _this$props7.getContainer;\n      var container = getContainer && getContainer();\n      this.drawerId = \"drawer_id_\".concat(Number((Date.now() + Math.random()).toString().replace('.', Math.round(Math.random() * 9).toString())).toString(16));\n      this.getLevelDom(this.props);\n\n      if (open) {\n        var _this$props$scrollLoc;\n\n        if (container && container.parentNode === document.body) {\n          currentDrawer[this.drawerId] = open;\n        } // 默认打开状态时推出 level;\n\n\n        this.openLevelTransition();\n        this.forceUpdate(function () {\n          _this2.domFocus();\n        });\n        (_this$props$scrollLoc = this.props.scrollLocker) === null || _this$props$scrollLoc === void 0 ? void 0 : _this$props$scrollLoc.lock();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props8 = this.props,\n          open = _this$props8.open,\n          getContainer = _this$props8.getContainer,\n          scrollLocker = _this$props8.scrollLocker;\n      var container = getContainer && getContainer();\n\n      if (open !== prevProps.open) {\n        if (container && container.parentNode === document.body) {\n          currentDrawer[this.drawerId] = !!open;\n        }\n\n        this.openLevelTransition();\n\n        if (open) {\n          this.domFocus();\n          scrollLocker === null || scrollLocker === void 0 ? void 0 : scrollLocker.lock();\n        } else {\n          scrollLocker === null || scrollLocker === void 0 ? void 0 : scrollLocker.unLock();\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$props9 = this.props,\n          open = _this$props9.open,\n          scrollLocker = _this$props9.scrollLocker;\n      delete currentDrawer[this.drawerId];\n\n      if (open) {\n        this.setLevelTransform(false);\n        document.body.style.touchAction = '';\n      }\n\n      scrollLocker === null || scrollLocker === void 0 ? void 0 : scrollLocker.unLock();\n    } // tslint:disable-next-line:member-ordering\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classnames,\n          _this3 = this;\n\n      var _this$props10 = this.props,\n          className = _this$props10.className,\n          children = _this$props10.children,\n          style = _this$props10.style,\n          width = _this$props10.width,\n          height = _this$props10.height,\n          defaultOpen = _this$props10.defaultOpen,\n          $open = _this$props10.open,\n          prefixCls = _this$props10.prefixCls,\n          placement = _this$props10.placement,\n          level = _this$props10.level,\n          levelMove = _this$props10.levelMove,\n          ease = _this$props10.ease,\n          duration = _this$props10.duration,\n          getContainer = _this$props10.getContainer,\n          handler = _this$props10.handler,\n          onChange = _this$props10.onChange,\n          afterVisibleChange = _this$props10.afterVisibleChange,\n          showMask = _this$props10.showMask,\n          maskClosable = _this$props10.maskClosable,\n          maskStyle = _this$props10.maskStyle,\n          onClose = _this$props10.onClose,\n          onHandleClick = _this$props10.onHandleClick,\n          keyboard = _this$props10.keyboard,\n          getOpenCount = _this$props10.getOpenCount,\n          scrollLocker = _this$props10.scrollLocker,\n          props = _objectWithoutProperties(_this$props10, [\"className\", \"children\", \"style\", \"width\", \"height\", \"defaultOpen\", \"open\", \"prefixCls\", \"placement\", \"level\", \"levelMove\", \"ease\", \"duration\", \"getContainer\", \"handler\", \"onChange\", \"afterVisibleChange\", \"showMask\", \"maskClosable\", \"maskStyle\", \"onClose\", \"onHandleClick\", \"keyboard\", \"getOpenCount\", \"scrollLocker\"]); // 首次渲染都将是关闭状态。\n\n\n      var open = this.dom ? $open : false;\n      var wrapperClassName = classnames(prefixCls, (_classnames = {}, _defineProperty(_classnames, \"\".concat(prefixCls, \"-\").concat(placement), true), _defineProperty(_classnames, \"\".concat(prefixCls, \"-open\"), open), _defineProperty(_classnames, className || '', !!className), _defineProperty(_classnames, 'no-mask', !showMask), _classnames));\n\n      var _this$getHorizontalBo2 = this.getHorizontalBoolAndPlacementName(),\n          placementName = _this$getHorizontalBo2.placementName; // 百分比与像素动画不同步，第一次打用后全用像素动画。\n      // const defaultValue = !this.contentDom || !level ? '100%' : `${value}px`;\n\n\n      var placementPos = placement === 'left' || placement === 'top' ? '-100%' : '100%';\n      var transform = open ? '' : \"\".concat(placementName, \"(\").concat(placementPos, \")\");\n      var handlerChildren = handler && /*#__PURE__*/React.cloneElement(handler, {\n        onClick: function onClick(e) {\n          if (handler.props.onClick) {\n            handler.props.onClick();\n          }\n\n          if (onHandleClick) {\n            onHandleClick(e);\n          }\n        },\n        ref: function ref(c) {\n          _this3.handlerDom = c;\n        }\n      });\n      return /*#__PURE__*/React.createElement(\"div\", _extends({}, omit(props, ['switchScrollingEffect']), {\n        tabIndex: -1,\n        className: wrapperClassName,\n        style: style,\n        ref: function ref(c) {\n          _this3.dom = c;\n        },\n        onKeyDown: open && keyboard ? this.onKeyDown : undefined,\n        onTransitionEnd: this.onWrapperTransitionEnd\n      }), showMask && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-mask\"),\n        onClick: maskClosable ? onClose : undefined,\n        style: maskStyle,\n        ref: function ref(c) {\n          _this3.maskDom = c;\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-content-wrapper\"),\n        style: {\n          transform: transform,\n          msTransform: transform,\n          width: isNumeric(width) ? \"\".concat(width, \"px\") : width,\n          height: isNumeric(height) ? \"\".concat(height, \"px\") : height\n        },\n        ref: function ref(c) {\n          _this3.contentWrapper = c;\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-content\"),\n        ref: function ref(c) {\n          _this3.contentDom = c;\n        },\n        onTouchStart: open && showMask ? this.removeStartHandler : undefined // 跑用例用\n        ,\n        onTouchMove: open && showMask ? this.removeMoveHandler : undefined // 跑用例用\n\n      }, children), handlerChildren));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, _ref2) {\n      var prevProps = _ref2.prevProps,\n          _self = _ref2._self;\n      var nextState = {\n        prevProps: props\n      };\n\n      if (prevProps !== undefined) {\n        var placement = props.placement,\n            level = props.level;\n\n        if (placement !== prevProps.placement) {\n          // test 的 bug, 有动画过场，删除 dom\n          _self.contentDom = null;\n        }\n\n        if (level !== prevProps.level) {\n          _self.getLevelDom(props);\n        }\n      }\n\n      return nextState;\n    }\n  }]);\n\n  return DrawerChild;\n}(React.Component);\n\nexport default DrawerChild;","map":{"version":3,"sources":["/Users/youn/Documents/younFolder/Demo/react-electron-pc/node_modules/rc-drawer/es/DrawerChild.js"],"names":["_extends","_defineProperty","_objectWithoutProperties","_classCallCheck","_createClass","_assertThisInitialized","_inherits","_createSuper","React","classnames","getScrollBarSize","KeyCode","omit","addEventListener","dataToArray","getTouchParentScroll","isNumeric","removeEventListener","transformArguments","transitionEnd","transitionStr","windowIsUndefined","currentDrawer","DrawerChild","_React$Component","_super","props","_this","call","domFocus","dom","focus","removeStartHandler","e","touches","length","startPos","x","clientX","y","clientY","removeMoveHandler","changedTouches","currentTarget","differX","differY","maskDom","handlerDom","contentDom","target","cancelable","preventDefault","style","transition","onKeyDown","keyCode","ESC","onClose","stopPropagation","onWrapperTransitionEnd","_this$props","open","afterVisibleChange","contentWrapper","propertyName","match","getCurrentDrawerSome","document","body","overflowX","left","width","openLevelTransition","_this$props2","height","_this$getHorizontalBo","getHorizontalBoolAndPlacementName","isHorizontal","placementName","contentValue","getBoundingClientRect","value","setLevelAndScrolling","setLevelTransform","right","_this$props3","placement","levelMove","duration","ease","showMask","levelDom","forEach","concat","levelValue","$levelMove","$value","placementPos","transform","onChange","scrollHeight","window","innerHeight","documentElement","clientHeight","innerWidth","offsetWidth","toggleScrollingToDrawerAndBody","_this$props4","getContainer","container","parentNode","eventArray","domArray","overflow","addScrollingEffect","touchAction","item","i","passive","remScrollingEffect","_this$props5","widthTransition","transformTransition","clearTimeout","timeout","setTimeout","_this$props6","heightTransition","Object","keys","some","key","getLevelDom","_ref","level","parent","children","Array","prototype","slice","child","nodeName","push","querySelectorAll","state","_self","componentDidMount","_this2","passiveSupported","defineProperty","get","err","_this$props7","drawerId","Number","Date","now","Math","random","toString","replace","round","_this$props$scrollLoc","forceUpdate","scrollLocker","lock","componentDidUpdate","prevProps","_this$props8","unLock","componentWillUnmount","_this$props9","render","_classnames","_this3","_this$props10","className","defaultOpen","$open","prefixCls","handler","maskClosable","maskStyle","onHandleClick","keyboard","getOpenCount","wrapperClassName","_this$getHorizontalBo2","handlerChildren","cloneElement","onClick","ref","c","createElement","tabIndex","undefined","onTransitionEnd","msTransform","onTouchStart","onTouchMove","getDerivedStateFromProps","_ref2","nextState","Component"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"@babel/runtime/helpers/esm/createSuper\";\nimport * as React from 'react';\nimport classnames from 'classnames';\nimport getScrollBarSize from \"rc-util/es/getScrollBarSize\";\nimport KeyCode from \"rc-util/es/KeyCode\";\nimport omit from \"rc-util/es/omit\";\nimport { addEventListener, dataToArray, getTouchParentScroll, isNumeric, removeEventListener, transformArguments, transitionEnd, transitionStr, windowIsUndefined } from './utils';\nvar currentDrawer = {};\n\nvar DrawerChild = /*#__PURE__*/function (_React$Component) {\n  _inherits(DrawerChild, _React$Component);\n\n  var _super = _createSuper(DrawerChild);\n\n  function DrawerChild(props) {\n    var _this;\n\n    _classCallCheck(this, DrawerChild);\n\n    _this = _super.call(this, props);\n\n    _this.domFocus = function () {\n      if (_this.dom) {\n        _this.dom.focus();\n      }\n    };\n\n    _this.removeStartHandler = function (e) {\n      if (e.touches.length > 1) {\n        return;\n      }\n\n      _this.startPos = {\n        x: e.touches[0].clientX,\n        y: e.touches[0].clientY\n      };\n    };\n\n    _this.removeMoveHandler = function (e) {\n      if (e.changedTouches.length > 1) {\n        return;\n      }\n\n      var currentTarget = e.currentTarget;\n      var differX = e.changedTouches[0].clientX - _this.startPos.x;\n      var differY = e.changedTouches[0].clientY - _this.startPos.y;\n\n      if ((currentTarget === _this.maskDom || currentTarget === _this.handlerDom || currentTarget === _this.contentDom && getTouchParentScroll(currentTarget, e.target, differX, differY)) && e.cancelable) {\n        e.preventDefault();\n      }\n    };\n\n    _this.transitionEnd = function (e) {\n      var dom = e.target;\n      removeEventListener(dom, transitionEnd, _this.transitionEnd);\n      dom.style.transition = '';\n    };\n\n    _this.onKeyDown = function (e) {\n      if (e.keyCode === KeyCode.ESC) {\n        var onClose = _this.props.onClose;\n        e.stopPropagation();\n\n        if (onClose) {\n          onClose(e);\n        }\n      }\n    };\n\n    _this.onWrapperTransitionEnd = function (e) {\n      var _this$props = _this.props,\n          open = _this$props.open,\n          afterVisibleChange = _this$props.afterVisibleChange;\n\n      if (e.target === _this.contentWrapper && e.propertyName.match(/transform$/)) {\n        _this.dom.style.transition = '';\n\n        if (!open && _this.getCurrentDrawerSome()) {\n          document.body.style.overflowX = '';\n\n          if (_this.maskDom) {\n            _this.maskDom.style.left = '';\n            _this.maskDom.style.width = '';\n          }\n        }\n\n        if (afterVisibleChange) {\n          afterVisibleChange(!!open);\n        }\n      }\n    };\n\n    _this.openLevelTransition = function () {\n      var _this$props2 = _this.props,\n          open = _this$props2.open,\n          width = _this$props2.width,\n          height = _this$props2.height;\n\n      var _this$getHorizontalBo = _this.getHorizontalBoolAndPlacementName(),\n          isHorizontal = _this$getHorizontalBo.isHorizontal,\n          placementName = _this$getHorizontalBo.placementName;\n\n      var contentValue = _this.contentDom ? _this.contentDom.getBoundingClientRect()[isHorizontal ? 'width' : 'height'] : 0;\n      var value = (isHorizontal ? width : height) || contentValue;\n\n      _this.setLevelAndScrolling(open, placementName, value);\n    };\n\n    _this.setLevelTransform = function (open, placementName, value, right) {\n      var _this$props3 = _this.props,\n          placement = _this$props3.placement,\n          levelMove = _this$props3.levelMove,\n          duration = _this$props3.duration,\n          ease = _this$props3.ease,\n          showMask = _this$props3.showMask; // router 切换时可能会导至页面失去滚动条，所以需要时时获取。\n\n      _this.levelDom.forEach(function (dom) {\n        dom.style.transition = \"transform \".concat(duration, \" \").concat(ease);\n        addEventListener(dom, transitionEnd, _this.transitionEnd);\n        var levelValue = open ? value : 0;\n\n        if (levelMove) {\n          var $levelMove = transformArguments(levelMove, {\n            target: dom,\n            open: open\n          });\n          levelValue = open ? $levelMove[0] : $levelMove[1] || 0;\n        }\n\n        var $value = typeof levelValue === 'number' ? \"\".concat(levelValue, \"px\") : levelValue;\n        var placementPos = placement === 'left' || placement === 'top' ? $value : \"-\".concat($value);\n        placementPos = showMask && placement === 'right' && right ? \"calc(\".concat(placementPos, \" + \").concat(right, \"px)\") : placementPos;\n        dom.style.transform = levelValue ? \"\".concat(placementName, \"(\").concat(placementPos, \")\") : '';\n      });\n    };\n\n    _this.setLevelAndScrolling = function (open, placementName, value) {\n      var onChange = _this.props.onChange;\n\n      if (!windowIsUndefined) {\n        var right = document.body.scrollHeight > (window.innerHeight || document.documentElement.clientHeight) && window.innerWidth > document.body.offsetWidth ? getScrollBarSize(true) : 0;\n\n        _this.setLevelTransform(open, placementName, value, right);\n\n        _this.toggleScrollingToDrawerAndBody(right);\n      }\n\n      if (onChange) {\n        onChange(open);\n      }\n    };\n\n    _this.toggleScrollingToDrawerAndBody = function (right) {\n      var _this$props4 = _this.props,\n          getContainer = _this$props4.getContainer,\n          showMask = _this$props4.showMask,\n          open = _this$props4.open;\n      var container = getContainer && getContainer(); // 处理 body 滚动\n\n      if (container && container.parentNode === document.body && showMask) {\n        var eventArray = ['touchstart'];\n        var domArray = [document.body, _this.maskDom, _this.handlerDom, _this.contentDom];\n\n        if (open && document.body.style.overflow !== 'hidden') {\n          if (right) {\n            _this.addScrollingEffect(right);\n          }\n\n          document.body.style.touchAction = 'none'; // 手机禁滚\n\n          domArray.forEach(function (item, i) {\n            if (!item) {\n              return;\n            }\n\n            addEventListener(item, eventArray[i] || 'touchmove', i ? _this.removeMoveHandler : _this.removeStartHandler, _this.passive);\n          });\n        } else if (_this.getCurrentDrawerSome()) {\n          document.body.style.touchAction = '';\n\n          if (right) {\n            _this.remScrollingEffect(right);\n          } // 恢复事件\n\n\n          domArray.forEach(function (item, i) {\n            if (!item) {\n              return;\n            }\n\n            removeEventListener(item, eventArray[i] || 'touchmove', i ? _this.removeMoveHandler : _this.removeStartHandler, _this.passive);\n          });\n        }\n      }\n    };\n\n    _this.addScrollingEffect = function (right) {\n      var _this$props5 = _this.props,\n          placement = _this$props5.placement,\n          duration = _this$props5.duration,\n          ease = _this$props5.ease;\n      var widthTransition = \"width \".concat(duration, \" \").concat(ease);\n      var transformTransition = \"transform \".concat(duration, \" \").concat(ease);\n      _this.dom.style.transition = 'none';\n\n      switch (placement) {\n        case 'right':\n          _this.dom.style.transform = \"translateX(-\".concat(right, \"px)\");\n          break;\n\n        case 'top':\n        case 'bottom':\n          _this.dom.style.width = \"calc(100% - \".concat(right, \"px)\");\n          _this.dom.style.transform = 'translateZ(0)';\n          break;\n\n        default:\n          break;\n      }\n\n      clearTimeout(_this.timeout);\n      _this.timeout = setTimeout(function () {\n        if (_this.dom) {\n          _this.dom.style.transition = \"\".concat(transformTransition, \",\").concat(widthTransition);\n          _this.dom.style.width = '';\n          _this.dom.style.transform = '';\n        }\n      });\n    };\n\n    _this.remScrollingEffect = function (right) {\n      var _this$props6 = _this.props,\n          placement = _this$props6.placement,\n          duration = _this$props6.duration,\n          ease = _this$props6.ease;\n\n      if (transitionStr) {\n        document.body.style.overflowX = 'hidden';\n      }\n\n      _this.dom.style.transition = 'none';\n      var heightTransition;\n      var widthTransition = \"width \".concat(duration, \" \").concat(ease);\n      var transformTransition = \"transform \".concat(duration, \" \").concat(ease);\n\n      switch (placement) {\n        case 'left':\n          {\n            _this.dom.style.width = '100%';\n            widthTransition = \"width 0s \".concat(ease, \" \").concat(duration);\n            break;\n          }\n\n        case 'right':\n          {\n            _this.dom.style.transform = \"translateX(\".concat(right, \"px)\");\n            _this.dom.style.width = '100%';\n            widthTransition = \"width 0s \".concat(ease, \" \").concat(duration);\n\n            if (_this.maskDom) {\n              _this.maskDom.style.left = \"-\".concat(right, \"px\");\n              _this.maskDom.style.width = \"calc(100% + \".concat(right, \"px)\");\n            }\n\n            break;\n          }\n\n        case 'top':\n        case 'bottom':\n          {\n            _this.dom.style.width = \"calc(100% + \".concat(right, \"px)\");\n            _this.dom.style.height = '100%';\n            _this.dom.style.transform = 'translateZ(0)';\n            heightTransition = \"height 0s \".concat(ease, \" \").concat(duration);\n            break;\n          }\n\n        default:\n          break;\n      }\n\n      clearTimeout(_this.timeout);\n      _this.timeout = setTimeout(function () {\n        if (_this.dom) {\n          _this.dom.style.transition = \"\".concat(transformTransition, \",\").concat(heightTransition ? \"\".concat(heightTransition, \",\") : '').concat(widthTransition);\n          _this.dom.style.transform = '';\n          _this.dom.style.width = '';\n          _this.dom.style.height = '';\n        }\n      });\n    };\n\n    _this.getCurrentDrawerSome = function () {\n      return !Object.keys(currentDrawer).some(function (key) {\n        return currentDrawer[key];\n      });\n    };\n\n    _this.getLevelDom = function (_ref) {\n      var level = _ref.level,\n          getContainer = _ref.getContainer;\n\n      if (windowIsUndefined) {\n        return;\n      }\n\n      var container = getContainer && getContainer();\n      var parent = container ? container.parentNode : null;\n      _this.levelDom = [];\n\n      if (level === 'all') {\n        var children = parent ? Array.prototype.slice.call(parent.children) : [];\n        children.forEach(function (child) {\n          if (child.nodeName !== 'SCRIPT' && child.nodeName !== 'STYLE' && child.nodeName !== 'LINK' && child !== container) {\n            _this.levelDom.push(child);\n          }\n        });\n      } else if (level) {\n        dataToArray(level).forEach(function (key) {\n          document.querySelectorAll(key).forEach(function (item) {\n            _this.levelDom.push(item);\n          });\n        });\n      }\n    };\n\n    _this.getHorizontalBoolAndPlacementName = function () {\n      var placement = _this.props.placement;\n      var isHorizontal = placement === 'left' || placement === 'right';\n      var placementName = \"translate\".concat(isHorizontal ? 'X' : 'Y');\n      return {\n        isHorizontal: isHorizontal,\n        placementName: placementName\n      };\n    };\n\n    _this.state = {\n      _self: _assertThisInitialized(_this)\n    };\n    return _this;\n  }\n\n  _createClass(DrawerChild, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (!windowIsUndefined) {\n        var passiveSupported = false;\n\n        try {\n          window.addEventListener('test', null, Object.defineProperty({}, 'passive', {\n            get: function get() {\n              passiveSupported = true;\n              return null;\n            }\n          }));\n        } catch (err) {}\n\n        this.passive = passiveSupported ? {\n          passive: false\n        } : false;\n      }\n\n      var _this$props7 = this.props,\n          open = _this$props7.open,\n          getContainer = _this$props7.getContainer;\n      var container = getContainer && getContainer();\n      this.drawerId = \"drawer_id_\".concat(Number((Date.now() + Math.random()).toString().replace('.', Math.round(Math.random() * 9).toString())).toString(16));\n      this.getLevelDom(this.props);\n\n      if (open) {\n        var _this$props$scrollLoc;\n\n        if (container && container.parentNode === document.body) {\n          currentDrawer[this.drawerId] = open;\n        } // 默认打开状态时推出 level;\n\n\n        this.openLevelTransition();\n        this.forceUpdate(function () {\n          _this2.domFocus();\n        });\n        (_this$props$scrollLoc = this.props.scrollLocker) === null || _this$props$scrollLoc === void 0 ? void 0 : _this$props$scrollLoc.lock();\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var _this$props8 = this.props,\n          open = _this$props8.open,\n          getContainer = _this$props8.getContainer,\n          scrollLocker = _this$props8.scrollLocker;\n      var container = getContainer && getContainer();\n\n      if (open !== prevProps.open) {\n        if (container && container.parentNode === document.body) {\n          currentDrawer[this.drawerId] = !!open;\n        }\n\n        this.openLevelTransition();\n\n        if (open) {\n          this.domFocus();\n          scrollLocker === null || scrollLocker === void 0 ? void 0 : scrollLocker.lock();\n        } else {\n          scrollLocker === null || scrollLocker === void 0 ? void 0 : scrollLocker.unLock();\n        }\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this$props9 = this.props,\n          open = _this$props9.open,\n          scrollLocker = _this$props9.scrollLocker;\n      delete currentDrawer[this.drawerId];\n\n      if (open) {\n        this.setLevelTransform(false);\n        document.body.style.touchAction = '';\n      }\n\n      scrollLocker === null || scrollLocker === void 0 ? void 0 : scrollLocker.unLock();\n    } // tslint:disable-next-line:member-ordering\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _classnames,\n          _this3 = this;\n\n      var _this$props10 = this.props,\n          className = _this$props10.className,\n          children = _this$props10.children,\n          style = _this$props10.style,\n          width = _this$props10.width,\n          height = _this$props10.height,\n          defaultOpen = _this$props10.defaultOpen,\n          $open = _this$props10.open,\n          prefixCls = _this$props10.prefixCls,\n          placement = _this$props10.placement,\n          level = _this$props10.level,\n          levelMove = _this$props10.levelMove,\n          ease = _this$props10.ease,\n          duration = _this$props10.duration,\n          getContainer = _this$props10.getContainer,\n          handler = _this$props10.handler,\n          onChange = _this$props10.onChange,\n          afterVisibleChange = _this$props10.afterVisibleChange,\n          showMask = _this$props10.showMask,\n          maskClosable = _this$props10.maskClosable,\n          maskStyle = _this$props10.maskStyle,\n          onClose = _this$props10.onClose,\n          onHandleClick = _this$props10.onHandleClick,\n          keyboard = _this$props10.keyboard,\n          getOpenCount = _this$props10.getOpenCount,\n          scrollLocker = _this$props10.scrollLocker,\n          props = _objectWithoutProperties(_this$props10, [\"className\", \"children\", \"style\", \"width\", \"height\", \"defaultOpen\", \"open\", \"prefixCls\", \"placement\", \"level\", \"levelMove\", \"ease\", \"duration\", \"getContainer\", \"handler\", \"onChange\", \"afterVisibleChange\", \"showMask\", \"maskClosable\", \"maskStyle\", \"onClose\", \"onHandleClick\", \"keyboard\", \"getOpenCount\", \"scrollLocker\"]); // 首次渲染都将是关闭状态。\n\n\n      var open = this.dom ? $open : false;\n      var wrapperClassName = classnames(prefixCls, (_classnames = {}, _defineProperty(_classnames, \"\".concat(prefixCls, \"-\").concat(placement), true), _defineProperty(_classnames, \"\".concat(prefixCls, \"-open\"), open), _defineProperty(_classnames, className || '', !!className), _defineProperty(_classnames, 'no-mask', !showMask), _classnames));\n\n      var _this$getHorizontalBo2 = this.getHorizontalBoolAndPlacementName(),\n          placementName = _this$getHorizontalBo2.placementName; // 百分比与像素动画不同步，第一次打用后全用像素动画。\n      // const defaultValue = !this.contentDom || !level ? '100%' : `${value}px`;\n\n\n      var placementPos = placement === 'left' || placement === 'top' ? '-100%' : '100%';\n      var transform = open ? '' : \"\".concat(placementName, \"(\").concat(placementPos, \")\");\n      var handlerChildren = handler && /*#__PURE__*/React.cloneElement(handler, {\n        onClick: function onClick(e) {\n          if (handler.props.onClick) {\n            handler.props.onClick();\n          }\n\n          if (onHandleClick) {\n            onHandleClick(e);\n          }\n        },\n        ref: function ref(c) {\n          _this3.handlerDom = c;\n        }\n      });\n      return /*#__PURE__*/React.createElement(\"div\", _extends({}, omit(props, ['switchScrollingEffect']), {\n        tabIndex: -1,\n        className: wrapperClassName,\n        style: style,\n        ref: function ref(c) {\n          _this3.dom = c;\n        },\n        onKeyDown: open && keyboard ? this.onKeyDown : undefined,\n        onTransitionEnd: this.onWrapperTransitionEnd\n      }), showMask && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-mask\"),\n        onClick: maskClosable ? onClose : undefined,\n        style: maskStyle,\n        ref: function ref(c) {\n          _this3.maskDom = c;\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-content-wrapper\"),\n        style: {\n          transform: transform,\n          msTransform: transform,\n          width: isNumeric(width) ? \"\".concat(width, \"px\") : width,\n          height: isNumeric(height) ? \"\".concat(height, \"px\") : height\n        },\n        ref: function ref(c) {\n          _this3.contentWrapper = c;\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(prefixCls, \"-content\"),\n        ref: function ref(c) {\n          _this3.contentDom = c;\n        },\n        onTouchStart: open && showMask ? this.removeStartHandler : undefined // 跑用例用\n        ,\n        onTouchMove: open && showMask ? this.removeMoveHandler : undefined // 跑用例用\n\n      }, children), handlerChildren));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(props, _ref2) {\n      var prevProps = _ref2.prevProps,\n          _self = _ref2._self;\n      var nextState = {\n        prevProps: props\n      };\n\n      if (prevProps !== undefined) {\n        var placement = props.placement,\n            level = props.level;\n\n        if (placement !== prevProps.placement) {\n          // test 的 bug, 有动画过场，删除 dom\n          _self.contentDom = null;\n        }\n\n        if (level !== prevProps.level) {\n          _self.getLevelDom(props);\n        }\n      }\n\n      return nextState;\n    }\n  }]);\n\n  return DrawerChild;\n}(React.Component);\n\nexport default DrawerChild;"]},"metadata":{},"sourceType":"module"}